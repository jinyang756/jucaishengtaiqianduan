# 聚财生态基金管理系统 - API模拟数据指南

## 问题说明

当您尝试登录系统时，可能会遇到以下错误：
- `net::ERR_FAILED https://jucaishengtaihouduan.vercel.app/api/auth/login`
- `API请求错误: TypeError: Failed to fetch`

这些错误通常表示系统无法连接到后端API服务器。这可能是由于网络问题、服务器不可用或CORS配置等原因导致的。

## 解决方案

为了确保系统在API连接失败的情况下仍然可以使用，我们实现了完整的模拟数据机制。本指南将帮助您了解如何使用模拟数据进行登录和使用系统功能。

## 模拟数据功能说明

### 1. 登录模拟

当API连接失败时，系统会自动使用模拟数据进行登录。模拟登录会：
- 设置一个默认的模拟令牌（`mock-jwt-token`）
- 创建一个默认的管理员用户会话
- 允许您访问所有系统功能

### 2. API请求模拟

对于各种API请求（如基金数据、新闻等），系统也提供了完整的模拟数据响应：
- 基金列表数据
- 新闻资讯数据
- 用户信息数据
- 计算引擎状态数据

## 使用方法

### 方法1：使用测试登录页面

系统提供了专门的测试登录页面，优化了模拟数据的使用体验：

1. 访问 `http://localhost:5173/test-login.html`
2. 输入任意用户名和密码（默认已填充 `admin/password`）
3. 点击"测试登录"按钮
4. 系统会尝试连接API，如果失败则自动使用模拟数据
5. 登录成功后会显示详细的登录过程日志
6. 3秒后自动重定向到系统首页

### 方法2：使用标准登录页面

即使使用标准的登录页面，系统也会在API连接失败时自动切换到模拟数据模式：

1. 访问 `http://localhost:5173/login.html`
2. 输入任意用户名和密码
3. 点击"登录"按钮
4. 系统会自动处理API连接失败的情况并使用模拟数据

## 调试功能

测试登录页面提供了丰富的调试功能：

1. **登录过程日志**：显示详细的登录步骤和系统状态
2. **API连接测试**：在登录前测试API服务器的可连接性
3. **存储状态检查**：显示本地存储中的认证信息
4. **清除本地存储**：可以清除所有本地存储的数据，重新开始测试

## 常见问题解答

### Q: 登录成功后，为什么看不到真实数据？
A: 当API连接失败时，系统使用的是内置的模拟数据，这些数据是固定的示例数据，不是真实的后端数据。

### Q: 如何判断系统是否正在使用模拟数据？
A: 打开浏览器的开发者工具（按F12），在控制台中可以看到相关的日志信息，如"使用模拟数据代替真实API响应"或"无法连接到API服务器，使用模拟数据"。

### Q: 模拟数据模式下，我可以使用所有功能吗？
A: 是的，在模拟数据模式下，您可以使用系统的所有功能，但数据是模拟的，不会保存到真实的后端服务器。

### Q: 如何切换回使用真实API？
A: 当您的网络连接恢复正常，并且后端API服务器可用时，系统会自动尝试使用真实API。您也可以清除本地存储后重新登录来触发此过程。

## 注意事项

1. 模拟数据仅用于开发和测试目的
2. 在生产环境中，请确保正确配置API连接
3. 如果您需要特定的模拟数据，可以修改 `src/apiService.js` 文件中的 `getMockData` 函数

## 技术实现细节

系统的模拟数据机制主要通过以下几个部分实现：

1. `apiService.js` 中的错误处理和模拟数据生成
2. `authService.js` 中的登录容错处理
3. `test-login.html` 中的增强调试功能

这些实现确保了即使在API连接不可用的情况下，系统仍然可以正常运行并提供完整的用户体验。